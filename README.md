# voteMaster2017
某大学の学祭で催されたミスコンと，カラオケ大会の投票のために制作したWebアプリケーションです。

## Function

### 投票機能について
投票者は，1人につきMs，Mr，カラオケ　それぞれのグループに1日1回まで投票することが出来ます。
また，クーポンの登録機能を用いることで，投票回数を増やすことも出来ます。
使用できるクーポン(英数字の乱数)はenabledCoupon.phpに登録されており，投票者が登録することで，初期設定だと1日4回まで投票数を増やすことが出来ます。

### 管理ページについて
管理者は，/admin/sqltest.phpから投票数の確認・投票対象者情報の編集などの管理を行うことが出来ます。
新規設置をされる際は、IPアドレス制限や，basic認証なのでアクセス制限を掛けることが望ましいです。

## Example
### 一般投票者向け
https://git.i-lab.cf/voteMaster2017/index.php
### 管理者向け(本来はbasic認証などでアクセス制限を掛けることが望ましいです。)
https://git.i-lab.cf/voteMaster2017/admin/sqltest.php

## Installation

### データベースの設置について
初回インストールの際に，データベースに手を加える必要があります。
まず，同梱のxyzfestival.sqlをMySQL，MariaDBなどのお持ちのデータベースサーバにインポートしてください。
その後，/php/mysqld.phpの内容をインポートしたデータベースの情報にあわせて編集して下さい。
index.phpを開いてエラー画面が出なければ設置は成功です。

### ファイルパーミッションについて
/log/フォルダの中身には必ず書き込み・実行権限を与えて下さい。
正しくログファイルが記録されない場合があります。
詳しくは，該当フォルダ内にあるファイルをご覧下さい。

### 投票対象者の写真について
投票対象者番号に対応しています。アップロードした画像ファイルの名称を"/memberphoto/(投票対象者番号).jpg"と変更してください。
##### 例:投票対象差番号が"9901"の場合 -> "/memberphoto/9901.jpg"

## Description
本プロジェクトを新規設置される際にいくつか注意点がございますので，以下の点をご参照下さい。

### 投票対象者について
同梱のSQLファイルにおいて，投票対象者は，Ms・Mr・カラオケ各グループ10人ずつ設定されています。
"userComment" "voteMaster"それぞれのテーブルに投票対象者番号をINSERT処理を行うことで，投票対象者を増やすことが出来ます。

### 投票対象者番号番号の振り出しについて
本プロジェクトは，投票対象者を番号でデータベース管理するシステムとなっています。
本プロジェクト公開時点での割り振り方法は以下の通りです:

1. 1101-1110: Ms
2. 1201-1210: Mr
3. 3101-3110: カラオケ

##### ※2101-2110,2201-2210,9901-9999はシステム構成の都合上削除していますが，INSERT処理を行った上，PHPファイルを編集すると表示することが出来ます。

### Issues
このプロジェクトには多数課題点がございます。詳しくはIssuesをご覧下さい。
